<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALPHA COMMAND | Corporate Deck</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="assets/css/main.css">
    <link rel="icon" type="image/svg+xml" href="images/favicon.svg">


    <style>
        /* =========================================================
           ALPHA BACKEND STYLE (TACTICAL UI)
           ========================================================= */
        :root {
            --term-bg: #050a15;
            --term-cyan: #00f2ff;
            --term-red: #ff4b5c;
            --term-green: #00ff88;
            --term-panel: rgba(0, 242, 255, 0.03);
            --term-border: rgba(0, 242, 255, 0.2);
        }

        body { 
            background-color: var(--term-bg); 
            color: var(--term-cyan); 
            font-family: 'Share Tech Mono', monospace, sans-serif; 
            margin: 0; padding: 0; 
            transition: all 0.3s ease; 
            display: flex; height: 100vh; overflow: hidden;
        }
        body[dir="rtl"] { font-family: 'Cairo', sans-serif; }

        /* --- UNIFIED ADMIN SIDEBAR --- */
        .admin-sidebar { 
            width: 260px; 
            background: rgba(0, 0, 0, 0.8); 
            border-right: 1px solid var(--term-border); 
            padding: 20px; 
            flex-shrink: 0; 
            display: flex; flex-direction: column; 
            box-shadow: 2px 0 15px rgba(0, 242, 255, 0.05);
        }
        body[dir="rtl"] .admin-sidebar { border-right: none; border-left: 1px solid var(--term-border); }
        
        .admin-sidebar-menu { list-style: none; padding: 0; margin: 30px 0 0 0; }
        .admin-sidebar-menu li { margin-bottom: 5px; }
        .admin-sidebar-menu a { 
            display: block; padding: 12px 15px; color: #888; 
            text-decoration: none; border-left: 3px solid transparent; 
            transition: all 0.3s ease; font-size: 0.9rem; letter-spacing: 1px;
        }
        .admin-sidebar-menu a:hover, .admin-sidebar-menu a.active { 
            background: rgba(0, 242, 255, 0.1); color: var(--term-cyan); border-left-color: var(--term-cyan); 
        }
        body[dir="rtl"] .admin-sidebar-menu a { border-left: none; border-right: 3px solid transparent; }
        body[dir="rtl"] .admin-sidebar-menu a:hover, body[dir="rtl"] .admin-sidebar-menu a.active { border-right-color: var(--term-cyan); }
        .admin-sidebar-menu i { margin-right: 15px; width: 20px; text-align: center; }

        /* --- MAIN DASHBOARD AREA --- */
        .admin-main-content { 
            flex-grow: 1; padding: 30px; display: flex; flex-direction: column; overflow-y: auto; 
            background: radial-gradient(circle at 50% 0%, rgba(0, 242, 255, 0.05) 0%, transparent 70%);
        }
        
        .header-top { 
            display: flex; justify-content: space-between; align-items: center; 
            border-bottom: 1px solid var(--term-border); padding-bottom: 20px; margin-bottom: 30px; 
        }
        .header-title { margin: 0; font-size: 1.8rem; text-shadow: 0 0 10px rgba(0, 242, 255, 0.3); }

        /* --- KPI GRID --- */
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-box { 
            border: 1px solid var(--term-border); background: rgba(0, 0, 0, 0.5); 
            padding: 25px; border-left: 4px solid var(--term-cyan);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            position: relative; overflow: hidden;
        }
        .stat-box::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 242, 255, 0.03), transparent);
            transform: rotate(45deg); animation: scanline 6s linear infinite; pointer-events: none;
        }
        @keyframes scanline { 0% { transform: translateY(-100%) rotate(45deg); } 100% { transform: translateY(100%) rotate(45deg); } }
        
        .stat-box.alert { border-left-color: var(--term-red); }
        .stat-box.success { border-left-color: var(--term-green); }
        
        .stat-val { font-size: 3rem; margin: 10px 0 0 0; color: white; font-weight: bold; }
        .stat-label { font-size: 0.85rem; opacity: 0.7; text-transform: uppercase; color: var(--term-cyan); font-weight: bold; letter-spacing: 1px; }

        /* --- DATA TABLE --- */
        .panel { 
            border: 1px solid var(--term-border); background: rgba(0,0,0,0.6); 
            flex-grow: 1; overflow-y: auto; padding: 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }
        .data-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .data-table th { 
            text-align: left; padding: 20px; border-bottom: 2px solid var(--term-border); 
            color: var(--term-cyan); text-transform: uppercase; background: rgba(0, 242, 255, 0.05);
            position: sticky; top: 0; z-index: 10;
        }
        body[dir="rtl"] .data-table th { text-align: right; }
        .data-table td { padding: 15px 20px; border-bottom: 1px solid rgba(0, 242, 255, 0.05); vertical-align: middle; color: #ddd; }
        .data-table tr:hover { background: rgba(0, 242, 255, 0.05); }

        /* --- BUTTONS & BADGES --- */
        .btn { 
            background: transparent; border: 1px solid var(--term-cyan); color: var(--term-cyan); 
            padding: 10px 20px; cursor: pointer; font-family: inherit; font-weight: bold; 
            transition: 0.3s; width: 100%; text-transform: uppercase; letter-spacing: 1px;
        }
        .btn:hover { background: var(--term-cyan); color: var(--term-bg); box-shadow: 0 0 15px rgba(0, 242, 255, 0.4); }
        
        .btn-cmd { background: transparent; border: 1px solid var(--term-cyan); color: var(--term-cyan); padding: 6px 12px; cursor: pointer; transition: 0.3s; font-size: 0.8rem; font-family: inherit; border-radius: 3px; }
        .btn-cmd:hover { background: var(--term-cyan); color: var(--term-bg); }
        .btn-cmd.action { border-color: var(--term-green); color: var(--term-green); margin-top: 8px; }
        .btn-cmd.action:hover { background: var(--term-green); color: var(--term-bg); }

        .badge { padding: 4px 10px; border-radius: 3px; font-size: 0.75rem; font-weight: bold; letter-spacing: 1px; }
        .b-pending { background: rgba(255, 75, 92, 0.1); color: var(--term-red); border: 1px solid var(--term-red); }
        .b-completed { background: rgba(0, 255, 136, 0.1); color: var(--term-green); border: 1px solid var(--term-green); }

        /* UPLOAD OVERLAY */
        #upload-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .upload-box { border: 1px solid var(--term-cyan); background: var(--term-bg); padding: 30px; width: 400px; box-shadow: 0 0 30px rgba(0, 242, 255, 0.2); }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--term-bg); }
        ::-webkit-scrollbar-thumb { background: var(--term-border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--term-cyan); }
		
		/* --- SYSTEM TRANSITION EFFECTS --- */
		body {
			opacity: 0; /* Start invisible */
			animation: systemBoot 0.4s ease-in forwards; /* Fade in automatically on load */
		}

		@keyframes systemBoot {
			0% { opacity: 0; transform: scale(0.99); }
			100% { opacity: 1; transform: scale(1); }
		}

		/* Class triggered by JS before leaving the page */
		body.system-shutdown {
			opacity: 0 !important;
			transform: scale(0.99);
		}
		
		/* --- SYSTEM LOADER OVERLAY --- */
		.system-loader {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: #050a15; /* Matches your terminal background */
			z-index: 9999; /* Keeps it on top of everything */
			display: flex;
			justify-content: center;
			align-items: center;
			opacity: 0;
			pointer-events: none; /* Lets clicks pass through when hidden */
			transition: opacity 0.3s ease;
		}

		/* When the JS triggers this class, the screen goes black */
		.system-loader.active {
			opacity: 1;
			pointer-events: all; /* Blocks clicks while loading */
		}

		/* The glowing text */
		.loader-text {
			color: #00f2ff;
			font-size: 1.5rem;
			font-family: 'Share Tech Mono', monospace;
			letter-spacing: 5px;
			text-shadow: 0 0 10px rgba(0, 242, 255, 0.8), 0 0 20px rgba(0, 242, 255, 0.4);
			animation: pulseGlow 1.2s infinite alternate;
		}

		/* The blinking dots */
		.loader-text .dots {
			display: inline-block;
			width: 20px;
			text-align: left;
			animation: blinkDots 1.5s infinite steps(4, end);
		}

		/* Keyframes for the neon pulse */
		@keyframes pulseGlow {
			0% { text-shadow: 0 0 5px rgba(0, 242, 255, 0.5); transform: scale(0.98); }
			100% { text-shadow: 0 0 20px rgba(0, 242, 255, 1), 0 0 40px rgba(0, 242, 255, 0.6); transform: scale(1); }
		}

		/* Keyframes for the typewriter dots */
		@keyframes blinkDots {
			0%, 20% { color: transparent; text-shadow: none; }
			40% { color: #00f2ff; text-shadow: 0 0 10px rgba(0, 242, 255, 0.8); }
			100% { color: #00f2ff; text-shadow: 0 0 10px rgba(0, 242, 255, 0.8); }
		}
		
		::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--term-bg); }
        ::-webkit-scrollbar-thumb { background: var(--term-border); }
		
		.notif-item {
			padding: 12px;
			border-bottom: 1px solid rgba(0, 242, 255, 0.1);
			font-size: 0.8rem;
			animation: pulseEntry 0.5s ease-out;
		}
		.notif-item:hover { background: rgba(0, 242, 255, 0.05); }
		.notif-item .time { color: #555; font-size: 0.7rem; display: block; margin-bottom: 4px; }
		.notif-item.new { border-left: 2px solid var(--term-green); background: rgba(0, 255, 136, 0.02); }

		@keyframes pulseEntry {
			0% { background: rgba(0, 242, 255, 0.2); transform: translateX(10px); }
			100% { background: transparent; transform: translateX(0); }
		}
		
		/* --- STATUS LIGHT ANIMATIONS --- */
		.status-light {
			width: 10px;
			height: 10px;
			border-radius: 50%;
			transition: 0.3s;
		}

		.status-light.online {
			background-color: var(--term-green);
			box-shadow: 0 0 10px var(--term-green), 0 0 20px var(--term-green);
			animation: pulseStatus 2s infinite;
		}

		.status-light.offline {
			background-color: var(--term-red);
			box-shadow: 0 0 10px var(--term-red);
			animation: none;
		}

		@keyframes pulseStatus {
			0% { opacity: 1; transform: scale(1); }
			50% { opacity: 0.4; transform: scale(0.9); }
			100% { opacity: 1; transform: scale(1); }
		}
    </style>
	
</head>

<body class="admin-theme">
    <div id="system-loader" class="system-loader">
        <div class="loader-content">
            <div class="dna-spinner"></div>
            <p>ESTABLISHING SECURE CORPORATE UPLINK...</p>
        </div>
    </div>

    <div class="dash-wrapper">
        <aside class="dash-sidebar">
            <div class="sidebar-header">
                <img src="images/logo-alpha.svg" alt="Alpha" class="alpha-logo">
                <div class="status-orb pulse-green"></div>
            </div>
            
            <nav class="admin-sidebar-menu">
                <a href="alpha.html"><i class="fas fa-terminal"></i> <span>Command Hub</span></a>
                <a href="admin_corporates.html" class="active"><i class="fas fa-building-columns"></i> <span>Embassies & Corps</span></a>
                <a href="admin_operatives.html"><i class="fas fa-user-shield"></i> <span>Field Operatives</span></a>
                <a href="admin_missions.html"><i class="fas fa-briefcase"></i> <span>Active Missions</span></a>
                <a href="index.html" class="logout-link"><i class="fas fa-power-off"></i> <span>Exit Alpha</span></a>
            </nav>
        </aside>

        <main class="dash-main-content">
            <header class="tactical-header">
                <div class="header-intel">
                    <h1 data-i18n="corp_deck_title">SOVEREIGN ENTITY CONTROL</h1>
                    <p class="hacker-text">Monitoring High-Value Cultural Data Streams</p>
                </div>
                <div class="header-actions">
                    <button class="alpha-btn secondary" onclick="openProtocolModal()">
                        <i class="fas fa-plus"></i> NEW CORPORATE PROTOCOL
                    </button>
                </div>
            </header>

            <div class="alpha-stats-grid">
                <div class="stat-card">
                    <label>ACTIVE EMBASSIES</label>
                    <div class="value" id="count-embassies">08</div>
                    <div class="trend-up">+2 this month</div>
                </div>
                <div class="stat-card">
                    <label>CORPORATE CONTRACTS</label>
                    <div class="value" id="count-corps">24</div>
                </div>
                <div class="stat-card highlight">
                    <label>SENSITIVE DATA EFFICIENCY</label>
                    <div class="value">99.8%</div>
                </div>
            </div>

            <section class="admin-panel-box">
                <div class="panel-header">
                    <h3><i class="fas fa-broadcast-tower"></i> REGISTERED ENTITIES</h3>
                    <div class="panel-search">
                        <input type="text" placeholder="Search Entity ID..." id="corp-search">
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="alpha-table">
                        <thead>
                            <tr>
                                <th>ENTITY NAME</th>
                                <th>CATEGORY</th>
                                <th>SECURITY CLEARANCE</th>
                                <th>ACTIVE MISSIONS</th>
                                <th>REVENUE (JOD)</th>
                                <th>STATUS</th>
                                <th>ACTION</th>
                            </tr>
                        </thead>
                        <tbody id="corporate-list">
                            <tr>
                                <td class="entity-name">US Embassy Amman</td>
                                <td>Diplomatic</td>
                                <td><span class="badge secure">LEVEL 5</span></td>
                                <td>14</td>
                                <td>4,250.00</td>
                                <td><span class="status-active">LINKED</span></td>
                                <td><button class="table-action"><i class="fas fa-eye"></i></button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
        
        // Use your existing Firebase config from global-auth.js
        // ... (Config here)

        // Add Logic to fetch users with "role: 'corporate'" or from a 'corporates' collection
        // This ensures Al-Khat handles their sensitive data efficiently.
    </script>
</body>
</html>